[title=EoSD: Remilia's 2nd non-spell timer]
# Remilia's 2nd non-spell timer
[hr_major]

## [specs]  
[hr_minor]

* **Versions**: [unknown]1.00[/unknown] - [unknown]1.01[/unknown] - [unknown]1.02[/unknown] - [unknown]1.02a[/unknown] - [unknown]1.02b[/unknown] - [unknown]1.02c[/unknown] - [unknown]1.02d[/unknown] - [unknown]1.02e[/unknown] - [unknown]1.02f[/unknown] - [yes]1.02h[/yes]
* **Difficulty**: [no]Easy[/no] - [no]Normal[/no] - [yes]Hard[/yes] - [yes]Lunatic[/yes] - [no]Extra[/no]
* **Mode**: [yes]Main game[/yes] - [yes]Practice mode[/yes]
* **Shottype**: [yes]ReimuA[/yes] - [yes]ReimuB[/yes] - [yes]MarisaA[/yes] - [yes]MarisaB[/yes]

## [what]
[hr_minor]

When paying attention to the timer on Remilia's 2nd non-spell, one may notice that [hl2]the timer periodically decreases by half a second every 5 seconds[/hl2].

## [how]
[hr_minor]

[hl2]This behaviour happens automatically[/hl2] when facing Remilia's 2nd non-spell on Hard or Lunatic difficulty. No special conditions need to be met for this to happen.

## [why]
[hr_minor]

For a boss attack to have a timer, the function [ins=0, n=115] is used to determine how long an attack lasts for. For Remilia's 2nd non-spell, the following [ins=0, n=115] is used:
[code]timer_callback_threshold(2700)[/code]

This means her second non-spell lasts for 2700 frames, or 45 seconds.

Internally, the game increases a variable called [ins=2, n=10022] until it hits 2700 frames. To be more specific, it checks for the following condition: ``[ins=2, n=10022] >= 2700``. [ins=2, n=10022] automatically increments by one every in-game tick. However, there is a second way in which [ins=2, n=10022]'s value can be changed. On Remilia's 2nd non-spell, we have the following code exists:

[code]loop {
    move_rand_in_bounds(-3.1415927, 3.1415927);
    move_speed(2.5);
    move_time_decelerate((90 :  : 60 :  ));
    {"HL"}:  SELF_TIME = SELF_TIME + 30;
+90: // 150
    sub20(0, 0.0);
    move_rand_in_bounds(-3.1415927, 3.1415927);
    move_speed(2.5);
    move_time_decelerate((90 :  : 60 :  ));
    {"HL"}:  SELF_TIME = SELF_TIME + 30;
+90: // 240
    sub21(0, 0.0);
    move_rand_in_bounds(-3.1415927, 3.1415927);
    move_speed(2.5);
    move_time_decelerate((90 :  : 60 :  ));
    {"HL"}:  SELF_TIME = SELF_TIME + 30;
+90: // 330
    sub22(0, 0.0);
    sub20(0, 0.0);
    math_inc(I7);
+10: // 340
}
[/code]

To break it down, we are only interested in the following code sniplet:

[code]{"HL"}:  SELF_TIME = SELF_TIME + 30;[/code]

This code sniplet says [hl2]"If the difficulty is Hard/Lunatic, increase [ins=2, n=10022] by 30"[/hl2]. Since [ins=2, n=10022] suddenly increases, it means that the boss timer can make sudden jumps. This explains why only on Hard/Lunatic Remilia's 2nd non-spell's timer periodically decreases by half a second every 5 seconds.

[hr_major]
## [links]
[hr_minor]
### [rpy]
[hr_minor]

### [vid]
[hr_minor]

[buildCategoriesTable]