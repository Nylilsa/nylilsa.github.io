[title=UDoALG: Hisami's laser crash]
# Hisami's laser crash
[hr_major]

## [specs]  
[hr_minor]

* **Versions**: [yes]1.00a[/yes] - [no]1.10c[/no]
* **Difficulty**: [yes]Easy[/yes] - [yes]Normal[/yes] - [yes]Hard[/yes] - [yes]Lunatic[/yes]
* **Mode**: [yes]Story mode[/yes] - [yes]VS mode[/yes] - [no]Online VS mode[/no]
* **Shottype**: [no]Reimu[/no] - [no]Marisa[/no] - [no]Sanae[/no] - [no]Ran[/no] - [no]Aunn[/no] - [no]Nazrin[/no] - [no]Seiran[/no] - [no]Rin[/no] - [no]Tsukasa[/no] - [no]Mamizou[/no] - [no]Yachie[/no] - [no]Saki[/no] - [no]Yuuma[/no] - [no]Suika[/no] - [no]Biten[/no] - [no]Enoko[/no] - [no]Chiyari[/no] - [yes]Hisami[/yes] - [no]Zanmu[/no]


## [what]
[hr_minor]

When [hl2]fighting as Hisami[/hl2], she likes to spawn lasers. When there are too many lasers at once, the game crashes. This can happen regardless of difficulty but this is the most prevalent on higher difficulties as higher difficulties spawn more lasers.

[img=bugs/th19/4_laser.png, hratio=2, other= ]

## [how]
[hr_minor]

In order to trigger the crash, the following conditions must be met:
1. Player 1 can either be a real player or a CPU, but Player 2 must be a CPU;
2. Player 1 must choose Hisami as their shottype;
3. Enough lasers need to spawn on Player 2's side

The easiest way to trigger this is to go into VS mode on Lunatic mode on CPU vs CPU.

## [why]
[hr_minor]

The CPU has a fixed length array that all keep track of everything it can collide with. This fixed length array is [hl2]very large[/hl2], so in most normal cases, even if the bullet cap of 2,000 is reached, the CPU should be able to handle it without the array overflowing. [hl2]This fixed length array does not have any buffer overflow protection.[/hl2] This means that if there is too much for the CPU opponent to handle, then the array would experience buffer overflow causing the game to crash.

The way to max out all the slots in the array is through the use of Hisami's lasers. Each laser is made up of a plethora of nodes, each node with a hitbox that fills up one slot in the array. When there are too many lasers, the slots quickly get filled up. This causes the buffer overflow thus crashing the game. 

[hr_major]
## [links]
[hr_minor]
### [vid]
[hr_minor]

[cite=XhSfFMq8RL]
[cite=vaFLqDnrYQ]
